var LazyPicture=function(t){"use strict";function e(t,e,n,i){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var o=t.naturalWidth,s=t.naturalHeight;if("string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){e.width=o,e.height=s;var l=e.getContext("2d");l.clearRect(0,0,o,s),l.drawImage(t,0,0),isNaN(n)||n<1||(i?r(e,0,0,o,s,n):a(e,0,0,o,s,n))}}}function n(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"==typeof t&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,r,i)}catch(t){throw new Error("unable to access image data: "+t)}}function r(t,e,r,a,o,s){if(!(isNaN(s)||s<1)){s|=0;var l=n(t,e,r,a,o);l=i(l,e,r,a,o,s),t.getContext("2d").putImageData(l,e,r)}}function i(t,e,n,r,i,a){var o,s,l,f,g,h,p,y,b,v,m,x,S,C,_,w,I,D,R,z,E,N,O,$,B,F=t.data,T=2*a+1,W=r-1,L=i-1,P=a+1,V=P*(P+1)/2,j=new d,k=j;for(l=1;l<T;l++)k=k.next=new d,l===P&&(B=k);k.next=j;var q=null,U=null;p=h=0;var X=c[a],A=u[a];for(s=0;s<i;s++){for(w=I=D=R=y=b=v=m=0,x=P*(z=F[h]),S=P*(E=F[h+1]),C=P*(N=F[h+2]),_=P*(O=F[h+3]),y+=V*z,b+=V*E,v+=V*N,m+=V*O,k=j,l=0;l<P;l++)k.r=z,k.g=E,k.b=N,k.a=O,k=k.next;for(l=1;l<P;l++)f=h+((W<l?W:l)<<2),y+=(k.r=z=F[f])*($=P-l),b+=(k.g=E=F[f+1])*$,v+=(k.b=N=F[f+2])*$,m+=(k.a=O=F[f+3])*$,w+=z,I+=E,D+=N,R+=O,k=k.next;for(q=j,U=B,o=0;o<r;o++)F[h+3]=O=m*X>>A,0!==O?(O=255/O,F[h]=(y*X>>A)*O,F[h+1]=(b*X>>A)*O,F[h+2]=(v*X>>A)*O):F[h]=F[h+1]=F[h+2]=0,y-=x,b-=S,v-=C,m-=_,x-=q.r,S-=q.g,C-=q.b,_-=q.a,f=p+((f=o+a+1)<W?f:W)<<2,y+=w+=q.r=F[f],b+=I+=q.g=F[f+1],v+=D+=q.b=F[f+2],m+=R+=q.a=F[f+3],q=q.next,x+=z=U.r,S+=E=U.g,C+=N=U.b,_+=O=U.a,w-=z,I-=E,D-=N,R-=O,U=U.next,h+=4;p+=r}for(o=0;o<r;o++){for(I=D=R=w=b=v=m=y=0,x=P*(z=F[h=o<<2]),S=P*(E=F[h+1]),C=P*(N=F[h+2]),_=P*(O=F[h+3]),y+=V*z,b+=V*E,v+=V*N,m+=V*O,k=j,l=0;l<P;l++)k.r=z,k.g=E,k.b=N,k.a=O,k=k.next;for(g=r,l=1;l<=a;l++)h=g+o<<2,y+=(k.r=z=F[h])*($=P-l),b+=(k.g=E=F[h+1])*$,v+=(k.b=N=F[h+2])*$,m+=(k.a=O=F[h+3])*$,w+=z,I+=E,D+=N,R+=O,k=k.next,l<L&&(g+=r);for(h=o,q=j,U=B,s=0;s<i;s++)F[(f=h<<2)+3]=O=m*X>>A,O>0?(O=255/O,F[f]=(y*X>>A)*O,F[f+1]=(b*X>>A)*O,F[f+2]=(v*X>>A)*O):F[f]=F[f+1]=F[f+2]=0,y-=x,b-=S,v-=C,m-=_,x-=q.r,S-=q.g,C-=q.b,_-=q.a,f=o+((f=s+P)<L?f:L)*r<<2,y+=w+=q.r=F[f],b+=I+=q.g=F[f+1],v+=D+=q.b=F[f+2],m+=R+=q.a=F[f+3],q=q.next,x+=z=U.r,S+=E=U.g,C+=N=U.b,_+=O=U.a,w-=z,I-=E,D-=N,R-=O,U=U.next,h+=r}return t}function a(t,e,r,i,a,s){if(!(isNaN(s)||s<1)){s|=0;var l=n(t,e,r,i,a);l=o(l,e,r,i,a,s),t.getContext("2d").putImageData(l,e,r)}}function o(t,e,n,r,i,a){var o,s,l,f,g,h,p,y,b,v,m,x,S,C,_,w,I,D,R,z,E,N=t.data,O=2*a+1,$=r-1,B=i-1,F=a+1,T=F*(F+1)/2,W=new d,L=W;for(l=1;l<O;l++)L=L.next=new d,l===F&&(E=L);L.next=W;var P=null,V=null;p=h=0;var j=c[a],k=u[a];for(s=0;s<i;s++){for(C=_=w=y=b=v=0,m=F*(I=N[h]),x=F*(D=N[h+1]),S=F*(R=N[h+2]),y+=T*I,b+=T*D,v+=T*R,L=W,l=0;l<F;l++)L.r=I,L.g=D,L.b=R,L=L.next;for(l=1;l<F;l++)f=h+(($<l?$:l)<<2),y+=(L.r=I=N[f])*(z=F-l),b+=(L.g=D=N[f+1])*z,v+=(L.b=R=N[f+2])*z,C+=I,_+=D,w+=R,L=L.next;for(P=W,V=E,o=0;o<r;o++)N[h]=y*j>>k,N[h+1]=b*j>>k,N[h+2]=v*j>>k,y-=m,b-=x,v-=S,m-=P.r,x-=P.g,S-=P.b,f=p+((f=o+a+1)<$?f:$)<<2,y+=C+=P.r=N[f],b+=_+=P.g=N[f+1],v+=w+=P.b=N[f+2],P=P.next,m+=I=V.r,x+=D=V.g,S+=R=V.b,C-=I,_-=D,w-=R,V=V.next,h+=4;p+=r}for(o=0;o<r;o++){for(_=w=C=b=v=y=0,m=F*(I=N[h=o<<2]),x=F*(D=N[h+1]),S=F*(R=N[h+2]),y+=T*I,b+=T*D,v+=T*R,L=W,l=0;l<F;l++)L.r=I,L.g=D,L.b=R,L=L.next;for(g=r,l=1;l<=a;l++)h=g+o<<2,y+=(L.r=I=N[h])*(z=F-l),b+=(L.g=D=N[h+1])*z,v+=(L.b=R=N[h+2])*z,C+=I,_+=D,w+=R,L=L.next,l<B&&(g+=r);for(h=o,P=W,V=E,s=0;s<i;s++)N[f=h<<2]=y*j>>k,N[f+1]=b*j>>k,N[f+2]=v*j>>k,y-=m,b-=x,v-=S,m-=P.r,x-=P.g,S-=P.b,f=o+((f=s+F)<B?f:B)*r<<2,y+=C+=P.r=N[f],b+=_+=P.g=N[f+1],v+=w+=P.b=N[f+2],P=P.next,m+=I=V.r,x+=D=V.g,S+=R=V.b,C-=I,_-=D,w-=R,V=V.next,h+=r}return t}function s(t,e,n,r,i,a,o,s,l,c){"boolean"!=typeof o&&(l=s,s=o,o=!1);var u="function"==typeof n?n.options:n;t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),r&&(u._scopeId=r);var d;if(a?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=d):e&&(d=o?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),d)if(u.functional){var f=u.render;u.render=function(t,e){return d.call(e),f(t,e)}}else{var g=u.beforeCreate;u.beforeCreate=g?[].concat(g,d):[d]}return n}function l(t){l.installed||(l.installed=!0,t.component("LazyPicture",f))}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],d=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},f=s({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",class:[t.containerClass],style:t.getContainerStyle},[n("img",{ref:"placeholder",style:t.placeholderStyleDefaults,attrs:{src:t.placeholder,crossOrigin:"anonymous"},on:{load:t.onPlaceholderLoad}}),t._v(" "),n("canvas",{ref:"canvas",style:t.getCanvasStyle}),t._v(" "),n("img",{ref:"picture",style:t.getFullSizeImageStyle,attrs:{alt:t.title,src:t.getFullSizeSrc},on:{load:function(e){t.loaded=!0}}})])},staticRenderFns:[]},void 0,{props:{containerBgColor:{type:String,default:"rgb(222, 222, 222)"},maxWidth:{type:String,default:"100%"},containerClass:{type:String,default:"lazy-picture"},title:{type:String,default:"Image"},placeholder:{type:String,required:!0},src:{type:String,required:!0},lazy:{type:Boolean,default:!1},blurRadius:{type:Number,default:5},transitionDuration:{type:Number,default:500},easing:{type:String,default:"ease"}},data:function(){return{blurReady:!1,loaded:!1,observer:null,intersected:!1,intersectionOptions:{root:null,rootMargin:"0px 0px 0px 0px",threshold:0},canvasStyleDefaults:{position:"absolute",top:0,left:0,width:"100%"},fullsizeImageStyleDefaults:{position:"absolute",top:0,left:0,width:"100%"},placeholderStyleDefaults:{display:"block",width:"100%",opacity:0}}},computed:{getCanvasStyle:function(){return Object.assign({},this.canvasStyleDefaults,{transitionDuration:this.transitionDuration+"ms",transitionTimingFunction:""+this.easing,opacity:this.blurReady?1:0})},getContainerStyle:function(){return{position:"relative",maxWidth:this.maxWidth,backgroundColor:this.containerBgColor}},getFullSizeImageStyle:function(){return Object.assign({},this.fullsizeImageStyleDefaults,{opacity:this.loaded?1:0,transitionDuration:this.transitionDuration+"ms",transitionTimingFunction:""+this.easing})},getFullSizeSrc:function(){return this.lazy?this.lazy&&this.intersected?this.src:null:this.src}},methods:{onPlaceholderLoad:function(){this.lazy&&(this.createIntersectionObserver(),this.createBlurredImage())},createBlurredImage:function(){e(this.$refs.placeholder,this.$refs.canvas,this.blurRadius,!1),this.blurReady=!0},createIntersectionObserver:function(){var t=this;this.observer=new IntersectionObserver(function(e){e[0].isIntersecting&&(t.intersected=!0,t.observer.disconnect())},this.intersectionOptions),this.observer.observe(this.$el)}},beforeDestroy:function(){this.observer.disconnect()}},void 0,!1,void 0,void 0,void 0),g={install:l},h=null;return"undefined"!=typeof window?h=window.Vue:"undefined"!=typeof global&&(h=global.Vue),h&&h.use(g),f.install=l,t.default=f,t}({});
