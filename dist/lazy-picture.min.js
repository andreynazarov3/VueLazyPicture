var LazyPicture=function(e){"use strict";function t(e,t,n,r,i,s,o,a,l,c){"boolean"!=typeof o&&(l=a,a=o,o=!1);var d="function"==typeof n?n.options:n;e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),r&&(d._scopeId=r);var u;if(s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=u):t&&(u=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(d.functional){var f=d.render;d.render=function(e,t){return u.call(t),f(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return n}function n(e){n.installed||(n.installed=!0,e.component("LazyPicture",i))}var r=require("./stackblur-canvas.js");process.browser&&require("intersection-observer");var i=t({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",class:[e.containerClass],style:{position:"relative",maxWidth:e.maxWidth}},[n("img",{ref:"placeholder",style:e.placeholderStyle,attrs:{src:e.placeholder},on:{load:e.onPlaceholderLoad}}),e._v(" "),n("canvas",{ref:"canvas",style:e.canvasStyle}),e._v(" "),n("img",{ref:"picture",style:e.getFullSizeImageStyle,attrs:{alt:e.title,src:e.getFullSizeSrc},on:{load:function(t){e.loaded=!0}}})])},staticRenderFns:[]},void 0,{props:{maxWidth:{type:String,default:"100%"},containerClass:{type:String,default:"lazy-picture"},title:{type:String,default:"Image"},placeholder:{type:String,required:!0},src:{type:String,required:!0},lazy:{type:Boolean,default:!1},blurRadius:{type:Number,default:5},transitionDuration:{type:Number,default:2e3},easing:{type:String,default:"ease"}},data:function(){return{loaded:!1,observer:null,intersected:!1,intersectionOptions:{root:null,rootMargin:"0px 0px 0px 0px",threshold:0},canvasStyle:{position:"absolute",top:0,left:0,width:"100%"},fullsizeImageStyleDefaults:{position:"absolute",top:0,left:0,width:"100%"},placeholderStyle:{display:"block",width:"100%",opacity:0}}},computed:{getFullSizeImageStyle:function(){return Object.assign({},this.fullsizeImageStyleDefaults,{opacity:this.loaded?1:0,transitionDuration:this.transitionDuration+"ms",transitionTimingFunction:""+this.easing})},getFullSizeSrc:function(){return this.lazy?this.lazy&&this.intersected?this.src:null:this.src}},methods:{onPlaceholderLoad:function(){this.lazy&&(this.createIntersectionObserver(),this.createBlurredImage())},createBlurredImage:function(){return r.image(this.$refs.placeholder,this.$refs.canvas,this.blurRadius,!1)},createIntersectionObserver:function(){var e=this;this.observer=new IntersectionObserver(function(t){t[0].isIntersecting&&(e.intersected=!0,e.observer.disconnect())},this.intersectionOptions),this.observer.observe(this.$el)}},beforeDestroy:function(){this.observer.disconnect()}},void 0,!1,void 0,void 0,void 0),s={install:n},o=null;return"undefined"!=typeof window?o=window.Vue:"undefined"!=typeof global&&(o=global.Vue),o&&o.use(s),i.install=n,e.default=i,e}({});
